plugins {
    id 'com.github.johnrengelman.shadow' version '1.2.2'
    id 'idea'
}

subprojects{
    apply plugin: 'scala'

    repositories {
        mavenCentral()
        maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
        flatDir(dirs: 'models')
    }

    compileScala {
        scalaCompileOptions.useCompileDaemon = true
    }

    tasks.withType(ScalaCompile) {
        scalaCompileOptions.useAnt = false
        sourceCompatibility = "1.7"
        targetCompatibility = "1.7"
    }

    configurations {
        all {
            exclude group: 'org.mortbay.jetty'
            exclude group: 'org.slf4j', module: 'slf4j-log4j12'
            exclude group: 'log4j', module: 'log4j'
//        exclude group: 'com.sun.jersey'
//        exclude group: 'com.sun.jersey.jersey-test-framework'
//        exclude group: 'com.sun.jersey.contribs'
        }
//    runtime.exclude group: 'org.apache.spark'
//    runtime.exclude group: 'org.apache.hbase'
//    runtime.exclude group: 'org.cloudera.htrace', module: 'htrace-core'
//    runtime.exclude module: 'stanford-corenlp-3.6.0-models'
//    runtime.exclude module: 'reflectasm'
    }

    dependencies {
        testCompile group: 'junit', name: 'junit', version: '4.11'
        testCompile 'org.scalatest:scalatest_2.10:3.0.0-M7'
        compile "org.scala-lang:scala-library:2.10.5"
        compile "org.scala-lang:scala-compiler:2.10.5"

        // These are required for json4s to work. Something imported a deprecated version.
        compile 'com.fasterxml.jackson.core:jackson-core:2.6.3'
        compile 'com.fasterxml.jackson.core:jackson-databind:2.6.3'
        compile 'com.fasterxml.jackson.core:jackson-annotations:2.6.3'
        compile 'com.fasterxml.jackson.module:jackson-module-scala_2.10:2.6.3'

        // The main Json library
        compile 'org.json4s:json4s-native_2.10:3.3.0'
        compile 'org.json4s:json4s-jackson_2.10:3.3.0'
        compile files('libs/alpn-boot-8.1.6.v20151105.jar')
    }
}

project(':ai') {
    apply plugin: 'application'
    apply plugin: 'com.github.johnrengelman.shadow'
    shadowJar {
        zip64 = true
    }
}

